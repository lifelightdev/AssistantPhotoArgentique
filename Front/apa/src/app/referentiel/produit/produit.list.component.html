<hr>
<h1>Recherche de produit</h1>
<form (ngSubmit)="onSubmit()">
  <div>
    <mat-form-field>
      <mat-label>Nom</mat-label>
      <input matInput [(ngModel)]="modelRechercheProduit.nom" name="nom">
    </mat-form-field>
  </div>
  <div>
    <mat-form-field>
      <mat-label>Type</mat-label>
      <mat-select [(value)]="modelRechercheProduit.typeProduit">
        <mat-option></mat-option>
        <mat-option [value]="type.id" *ngFor="let type of types">{{type.nom}}</mat-option>
      </mat-select>
    </mat-form-field>
  </div>
  <div>
    <mat-form-field>
      <mat-label>Statut</mat-label>
      <mat-select [(value)]="modelRechercheProduit.statutProduit">
        <mat-option></mat-option>
        <mat-option [value]="statut.id" *ngFor="let statut of statuts">{{statut.nom}}</mat-option>
      </mat-select>
    </mat-form-field>
  </div>

  <div>
    <mat-form-field>
      <mat-label>Marque</mat-label>
      <mat-select [(value)]="modelRechercheProduit.marque">
        <mat-option></mat-option>
        <mat-option [value]="marque.id" *ngFor="let marque of marques">{{marque.nom}}</mat-option>
      </mat-select>
    </mat-form-field>
    <mat-form-field>
      <mat-label>Modéle</mat-label>
      <mat-select [(value)]="modelRechercheProduit.modele">
        <mat-option></mat-option>
        <mat-option [value]="modele.id" *ngFor="let modele of modeles">{{modele.nom}}</mat-option>
      </mat-select>
    </mat-form-field>
  </div>
  <div>
    <mat-form-field>
      <mat-label>Remarque</mat-label>
      <textarea matInput [(ngModel)]="modelRechercheProduit.remarque" name="remarque"></textarea>
    </mat-form-field>
  </div>
  <button mat-raised-button type="submit">Rechercher</button>
</form>

<hr>
<h1>Liste des produits</h1>
<div>
  <table mat-table [dataSource]="dataSource">
    <ng-container matColumnDef="Tâche">
      <th mat-header-cell *matHeaderCellDef>
      </th>
      <td mat-cell *matCellDef="let produit">
        <a routerLink="/produit/detail/{{produit.id}}">Détail</a>
      </td>
    </ng-container>
    <ng-container matColumnDef="Type">
      <th mat-header-cell *matHeaderCellDef>Type</th>
      <td mat-cell *matCellDef="let produit"> {{produit.typeProduit?.nom}} </td>
    </ng-container>
    <ng-container matColumnDef="Marque">
      <th mat-header-cell *matHeaderCellDef>Marque</th>
      <td mat-cell *matCellDef="let produit"> {{produit.modele?.marque?.nom}} </td>
    </ng-container>
    <ng-container matColumnDef="Modéle">
      <th mat-header-cell *matHeaderCellDef>Modéle</th>
      <td mat-cell *matCellDef="let produit"> {{produit.modele?.nom}} </td>
    </ng-container>
    <ng-container matColumnDef="Photo">
      <th mat-header-cell *matHeaderCellDef>Photo</th>
      <td mat-cell *matCellDef="let produit">
        <img *ngIf="produit.photo" class="photo" src="assets/Images/{{ produit.nom }}.jpg" alt="Photo" />
      </td>
    </ng-container>
    <ng-container matColumnDef="Mode d'emploi">
      <th mat-header-cell *matHeaderCellDef>Mode d'emploi</th>
      <td mat-cell *matCellDef="let produit">
        <a *ngIf="produit.modeEmploi" href="assets/ModeEmploi/{{ produit.nom }}.pdf" target="_blank"
           rel="noopener noreferrer">Afficher le mode d'emploi</a>
      </td>
    </ng-container>
    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row (click)="onSelect(row)" *matRowDef="let row; columns: displayedColumns;"></tr>
  </table>
  <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons aria-label="Select page of periodic elements">
  </mat-paginator>
</div>
<hr>
